{% extends 'artiste/base.html.twig' %}

{% block title %}Mes Œuvres - Galerium{% endblock %}

{% block body %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h1>Mes Œuvres</h1>
    <a href="{{ path('app_oeuvre_new') }}" class="btn btn-primary">
        <i class="bi bi-plus-circle"></i> Ajouter une œuvre
    </a>
</div>

{% if oeuvres|length == 0 %}
    <div class="alert alert-info">
        <p class="mb-0">Vous n'avez pas encore d'œuvres. <a href="{{ path('app_oeuvre_new') }}">Ajoutez-en une maintenant !</a></p>
    </div>
{% else %}
    <div class="row">
        {% for oeuvre in oeuvres %}
            <div class="col-md-4 mb-4">
                <div class="card">
                    {% if oeuvre.image %}
                        <img src="{{ asset(oeuvre.image) }}" class="card-img-top oeuvre-image" alt="{{ oeuvre.titre }}">
                    {% else %}
                        <div class="oeuvre-image bg-secondary d-flex align-items-center justify-content-center text-white">
                            <i class="bi bi-image" style="font-size: 4rem;"></i>
                        </div>
                    {% endif %}
                    <div class="card-body">
                        <h5 class="card-title">{{ oeuvre.titre }}</h5>
                        <p class="card-text">
                            <small class="text-muted">
                                Catégorie: {{ oeuvre.categorie ?? 'Non spécifiée' }}<br>
                                Statut: 
                                {% if oeuvre.statut == 'publiee' %}
                                    <span class="badge bg-success">Publiée</span>
                                {% else %}
                                    <span class="badge bg-warning">En attente</span>
                                {% endif %}
                            </small>
                        </p>
                        <p class="card-text">{{ oeuvre.description|slice(0, 100) }}{% if oeuvre.description|length > 100 %}...{% endif %}</p>
                        <div class="d-flex justify-content-between">
                            <a href="{{ path('app_oeuvre_show', {'id': oeuvre.id}) }}" class="btn btn-sm btn-outline-primary">Voir</a>
                            <a href="{{ path('app_oeuvre_edit', {'id': oeuvre.id}) }}" class="btn btn-sm btn-outline-secondary">Modifier</a>
                        </div>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
{% endif %}
{% endblock %}







